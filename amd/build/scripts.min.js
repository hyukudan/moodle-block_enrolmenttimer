/**
 * Live countdown timer for the enrolment timer block.
 *
 * @module     block_enrolmenttimer/scripts
 * @copyright  2014 onwards LearningWorks Ltd {@link https://learningworks.co.nz/}
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @author     Aaron Leggett
 */
define("block_enrolmenttimer/scripts",["jquery"],(function($){return{initialise:function(){$(document).ready((function(){var options=[],arrayKeys=[],timestamp=0,forceTwoDigits=!1,intervalId=null;function updateMainCounter(counter,time){var html="";if(!0===forceTwoDigits&&1==time.toString().length)html+='<span class="timerNumChar" data-id="0">0</span>',html+='<span class="timerNumChar" data-id="1">'+time.toString()+"</span>";else for(var i=0;i<time.toString().length;i++)html+='<span class="timerNumChar" data-id="'+i+'">'+time.toString().charAt(i)+"</span>";$('.block_enrolmenttimer .active .timer-wrapper .timerNum[data-id="'+counter+'"]').html(html),$(".block_enrolmenttimer .active .text-desc ."+counter).html(time)}$(".block_enrolmenttimer .active").length>0&&($(".block_enrolmenttimer .timer-wrapper[data-id=force2]").length>0&&(forceTwoDigits=!0),function(){for(var children=$(".block_enrolmenttimer .active .timer-wrapper").find(".timerNum"),i=children.length-1;i>=0;i--){var arrayKey=$(children[i]).attr("data-id");arrayKeys.push(arrayKey)}}(),function(){for(var i=arrayKeys.length-1;i>=0;i--){var option=$(".block_enrolmenttimer .active .text-desc ."+arrayKeys[i]).text();options[arrayKeys[i]]=option}}(),function(){for(var unitSeconds={seconds:1,minutes:60,hours:3600,days:86400,weeks:604800,months:2592e3,years:31536e3},i=0;i<arrayKeys.length;i++){var val=parseInt(options[arrayKeys[i]],10);!isNaN(val)&&unitSeconds[arrayKeys[i]]&&(timestamp+=val*unitSeconds[arrayKeys[i]])}}(),intervalId=window.setInterval((function(){!function(){if(timestamp<=0){null!==intervalId&&(window.clearInterval(intervalId),intervalId=null);for(var j=0;j<arrayKeys.length;j++)updateMainCounter(arrayKeys[j],0)}else for(var time=--timestamp,tokens=["years","months","weeks","days","hours","minutes","seconds"],units=[31536e3,2592e3,604800,86400,3600,60,1],i=0;i<tokens.length;i++)if(-1!=arrayKeys.indexOf(tokens[i]))if(time>=units[i]){var count=Math.floor(time/units[i]);updateMainCounter(tokens[i],count),time-=count*units[i]}else updateMainCounter(tokens[i],0)}()}),1e3))}))}}}));

//# sourceMappingURL=scripts.min.js.map